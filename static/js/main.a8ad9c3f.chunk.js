(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{11:function(t,e,n){},30:function(t,e,n){"use strict";n.r(e);var c=n(0),r=n(20),i=n(16),s=n(3),a=n(4),o=n(5);n(11);var l=n(2),h=null,u=[[100,100]];function j(t){var e=Object(c.useRef)(null),n=1.5,r=function(t,e){u.push([t[0]+e*(Math.random()-.5),t[1]+e*(Math.random()-.5)])},i=function(e){for(var n=t.uv[0],c=t.uv[1],r=0;r<t.vortices.length;++r){var i=t.vortices[r],s=(e[0]-i[0])/100,a=(e[1]-i[1])/100,o=s*s+a*a;"source"==i[3]?(n+=i[2]*s/100/o,c+=i[2]*a/100/o):(n+=i[2]*a/100/o,c-=i[2]*s/100/o)}return[n,c]},s=function(t){var e=i(t),c=i([t[0]+e[0]*n/2,t[1]+e[1]*n/2]);t[0]+=c[0]*n,t[1]+=c[1]*n},j=document.createElement("canvas");j.width=t.width,j.height=t.height;var v=function(t){if(4==t.toString().length){var e=parseInt(t.toString()[0])/100,n=parseInt(t.toString()[1])/10,c=parseInt(t.toString().substr(2))/100;if(isNaN(e)||isNaN(n)||isNaN(c))return null;var r=function(t){return 5*c*(.2969*Math.sqrt(t)-.126*t-.3516*t*t+.2843*t*t*t-.1015*t*t*t*t)},i=function(t){return t<=n?e/(n*n)*(2*n*t-t*t):e/((1-n)*(1-n))*(1-2*n+2*n*t-t*t)},s=Math.round(6/c),a=Object(o.a)(Array(2*s+1).keys()).map((function(t){return t/s*(t/s)/(2+t/s)}));a.reverse();var l=a.map((function(t){return[t,i(t)+r(t)]}));return a.reverse(),a.splice(0,1),l.push.apply(l,Object(o.a)(a.map((function(t){return[t,i(t)-r(t)]})))),l}return null}(t.airfoil),d=function(){var n=j.getContext("2d");n.clearRect(0,0,t.width,t.height),n.fillStyle="#000000";for(var c=0;c<u.length;++c){var r=u[c];n.fillRect(r[0],r[1],1,1)}!function(e){for(var n=0;n<t.vortices.length;++n){var c=[parseInt(t.vortices[n][0]),parseInt(t.vortices[n][1])];t.iselect==n?(e.strokeStyle="#880000",e.beginPath(),e.moveTo(c[0],Math.max(1,c[1]-15)),e.lineTo(c[0],Math.min(t.height,c[1]+15)),e.stroke(),e.beginPath(),e.moveTo(Math.max(1,c[0]-15),c[1]),e.lineTo(Math.min(t.width,c[0]+15),c[1]),e.stroke(),e.fillStyle="#880000",e.beginPath(),e.arc(c[0],c[1],3,0,2*Math.PI)):(e.fillStyle="#008800",e.beginPath(),e.arc(c[0],c[1],3,0,2*Math.PI)),e.fill()}}(n),function(e){if(null!=v){var n=.7*t.width;e.strokeStyle="#888888",e.beginPath(),e.moveTo(.15*t.width+v[0][0]*n,t.height/2-v[0][1]*n);for(var c=1;c<v.length;++c)e.lineTo(.15*t.width+v[c][0]*n,t.height/2-v[c][1]*n);e.stroke()}}(n);var i=e.current.getContext("2d");i.clearRect(0,0,t.width,t.height),i.drawImage(j,0,0)};Object(c.useEffect)((function(){null!=h&&clearInterval(h),h=setInterval((function(){!function(){for(var e=0;e<u.length;++e)s(u[e]);u=u.filter((function(e){return Math.random()>.001&&isFinite(e[0])&&isFinite(e[1])&&e[0]>.2*-t.width&&e[0]<1.2*t.width&&e[1]>.2*-t.height&&e[1]<1.2*t.height}));for(var c=function(e){if("source"==t.vortices[e][3]&&t.vortices[e][2]<0){var c=parseInt(t.vortices[e][0]),r=parseInt(t.vortices[e][1]);u=u.filter((function(i){var s=i[0]-c,a=i[1]-r;return s*s+a*a>-.15*n*t.vortices[e][2]}))}},i=0;i<t.vortices.length;++i)c(i);for(var a=Math.max(.01,t.uv[0]),o=Math.max(.01,-t.uv[1]),l=3/Math.sqrt(a*a+o*o),h=t.height-t.spacing/a*t.delta;h>.2*-t.height;h-=t.spacing/a)r([0,h],l);for(var j=t.spacing/o*(1-t.delta);j<1.2*t.width;j+=t.spacing/o)r([j,t.height],l);for(var v=0;v<t.vortices.length;++v)if("source"==t.vortices[v][3]&&t.vortices[v][2]>0)for(var d=parseInt(t.vortices[v][0]),b=parseInt(t.vortices[v][1]),O=3*Math.ceil(2.07*t.vortices[v][2]/t.spacing),x=.1*t.vortices[v][2]*n,g=0;g<O;++g){var f=x+(Math.random()-.5)*n*4,p=d+f*Math.cos(2*g*Math.PI/O),m=b+f*Math.sin(2*g*Math.PI/O);r([p,m],.5*t.vortices[v][2]/1e3)}}(),d()}),30)}),[t]);return Object(l.jsx)("canvas",{ref:e,onClick:function(t){var n=e.current,c=n.getBoundingClientRect(),i=n.width/c.width,s=n.height/c.height,a=(t.clientX-c.left)*i,o=(t.clientY-c.top)*s;if(Math.random()<.5)for(var l=10,h=-10;h<l;h++)r([a-l,o+h],0),r([a+l,o+h],0),r([a+h,o-l],0),r([a+h,o+l],0);else for(var u=0;u<14;u++)r([a-u,o-14+u],0),r([a+u,o-14+u],0),r([a-u,o+14-u],0),r([a+u,o+14-u],0)},onMouseMove:function(n){var c=e.current,r=c.getBoundingClientRect(),s=c.width/r.width,o=c.height/r.height,l=(n.clientX-r.left)*s,h=(n.clientY-r.top)*o,u=i([l,h]),j=Object(a.a)(u,2),v=j[0],d=j[1],b=.5*(t.uv[0]*t.uv[0]+t.uv[1]*t.uv[1]-v*v-d*d);t.setmousestate([l,h,v,-d,b])},onMouseLeave:function(){t.setmousestate([])},width:t.width,height:t.height})}function v(t){var e=function(e){var n=Object(o.a)(t.vortices);n[t.selected][0]=e.target.value,t.setvortices(n)},n=function(e){var n=Object(o.a)(t.vortices);n[t.selected][1]=t.height-e.target.value,t.setvortices(n)},c=function(e){var n=Object(o.a)(t.vortices);n[t.selected][2]=Math.max(-100,Math.min(100,e.target.value)),t.setvortices(n)},r=function(e){var n=Object(o.a)(t.vortices);n[t.selected][3]=e.target.value,t.setvortices(n)},i=function(){var e=Object(o.a)(t.vortices);e.splice(t.selected,0,Object(o.a)(e[t.selected])),t.setvortices(e)},s=function(){var e=Object(o.a)(t.vortices);e.splice(t.selected,1),console.log(t.selected,e.length),t.setvortices(e)};return Object(l.jsx)("div",{children:Object(l.jsx)("table",{children:Object(l.jsxs)("tbody",{children:[Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{children:"x"}),Object(l.jsx)("th",{children:"y"}),Object(l.jsx)("th",{children:"strength"})]}),t.vortices.map((function(a,o){return Object(l.jsxs)("tr",{onFocus:function(){t.setselected(o)},onClick:function(){t.setselected(o)},onTouchStart:function(){t.setselected(o)},children:[Object(l.jsx)("td",{children:Object(l.jsx)("input",{type:"number",value:a[0],onChange:e,min:0,max:t.width,readOnly:o!=t.selected})}),Object(l.jsx)("td",{children:Object(l.jsx)("input",{type:"number",value:t.height-a[1],onChange:n,min:0,max:t.height,readOnly:o!=t.selected})}),Object(l.jsx)("td",{children:Object(l.jsx)("input",{type:"number",value:a[2],onChange:c,min:-100,max:100,readOnly:o!=t.selected})}),Object(l.jsx)("td",{children:Object(l.jsxs)("select",{value:a[3],onChange:r,children:[Object(l.jsx)("option",{value:"vortex",children:"vortex"}),Object(l.jsx)("option",{value:"source",children:"source"})]})}),Object(l.jsxs)("td",{children:[" ",o==t.selected?Object(l.jsx)("button",{onClick:i,children:"duplicate"}):Object(l.jsx)("span",{})]}),Object(l.jsxs)("td",{children:[" ",o==t.selected?Object(l.jsx)("button",{disabled:t.vortices.length<=1,onClick:s,children:"remove"}):Object(l.jsx)("span",{})]})]},o)}))]})})})}function d(t){return Object(l.jsxs)("div",{children:[Object(l.jsxs)("p",{children:[" ","u",Object(l.jsx)("sub",{children:"\u221e"})," ",Object(l.jsx)("input",{type:"number",step:.001,value:t.uv[0],onChange:function(e){var n=Math.max(0,Math.min(1,e.target.value));t.setuv([n,t.uv[1]])},min:0,max:1}),"   ","v",Object(l.jsx)("sub",{children:"\u221e"})," ",Object(l.jsx)("input",{type:"number",step:.001,value:-t.uv[1],onChange:function(e){var n=Math.max(0,Math.min(1,e.target.value));t.setuv([t.uv[0],-n])},min:0,max:1})," ","   ","\u03b4"," ",Object(l.jsx)("input",{type:"number",step:.01,value:t.delta,onChange:function(e){var n=Math.max(0,Math.min(1,e.target.value));t.setdelta(n)},min:0,max:1})]}),Object(l.jsxs)("p",{children:[" naca ",Object(l.jsx)("input",{type:"text",value:t.airfoil,onChange:function(e){t.setairfoil(e.target.value)},min:0,max:1})]})]})}function b(t){return 0==t.mousestate.length?Object(l.jsx)("div",{}):Object(l.jsxs)("div",{children:[Object(l.jsxs)("p",{children:["x=",t.mousestate[0].toFixed(0)]}),Object(l.jsxs)("p",{children:["y=",t.mousestate[1].toFixed(0)]}),Object(l.jsxs)("p",{children:["u=",t.mousestate[2].toFixed(2)]}),Object(l.jsxs)("p",{children:["v=",t.mousestate[3].toFixed(2)]}),Object(l.jsxs)("p",{children:["p=",t.mousestate[4].toFixed(2)]})]})}function O(){var t,e=[1280,720],n=Object(c.useState)(0),r=Object(a.a)(n,2),s=r[0],o=r[1],h=Object(c.useState)([1,0]),u=Object(a.a)(h,2),O=u[0],x=u[1],g=Object(c.useState)(0),f=Object(a.a)(g,2),p=f[0],m=f[1],M=Object(c.useState)(""),w=Object(a.a)(M,2),S=w[0],y=w[1],I=Object(c.useState)([]),C=Object(a.a)(I,2),k=C[0],F=C[1],P=Object(i.b)(),R=Object(a.a)(P,2),T=R[0],N=R[1],q=T.get("v"),_=Object(c.useState)(null==(t=q)?[[e[0]/2,e[1]/2,100,"vortex"]]:t.split("~").map((function(t){var n=t.split("_");return[parseFloat(n[0]),parseFloat(e[1]-n[1]),parseFloat(n[2]),n[3]]}))),B=Object(a.a)(_,2),E=B[0],J=B[1];return Object(l.jsx)("table",{children:Object(l.jsxs)("tbody",{children:[Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{rowSpan:2,children:Object(l.jsx)("img",{src:"qi.jpg"})}),Object(l.jsx)("td",{children:Object(l.jsx)(v,{vortices:E,selected:s,setvortices:function(t){J(t);for(var n=function(t){return t[0].toString()+"_"+(e[1]-t[1]).toString()+"_"+t[2].toString()+"_"+t[3]},c=n(t[0]),r=1;r<t.length;++r)c+="~",c+=n(t[r]);N({v:c})},setselected:o,width:e[0],height:e[1]})}),Object(l.jsx)("td",{rowSpan:2,width:"100px",valign:"bottom",children:Object(l.jsx)(b,{mousestate:k})}),Object(l.jsx)("td",{rowSpan:2,children:Object(l.jsx)("img",{src:"qi.jpg"})})]}),Object(l.jsx)("tr",{children:Object(l.jsx)("td",{children:Object(l.jsx)(d,{uv:O,setuv:x,delta:p,setdelta:m,airfoil:S,setairfoil:y})})}),Object(l.jsx)("tr",{children:Object(l.jsx)("td",{colSpan:4,children:Object(l.jsx)(j,{width:e[0],height:e[1],uv:O,spacing:20,u0:[1,0],vortices:E,iselect:s,delta:p,airfoil:S,setmousestate:F})})})]})})}var x=document.getElementById("root"),g=Object(r.createRoot)(x),f=Object(i.a)([{path:"*",element:Object(l.jsx)(O,{})}]);g.render(Object(l.jsx)(c.StrictMode,{children:Object(l.jsx)(s.b,{router:f})}))}},[[30,1,2]]]);
//# sourceMappingURL=main.a8ad9c3f.chunk.js.map