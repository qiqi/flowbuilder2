{"version":3,"sources":["FlowCanvas.js","Airfoil.js","VortexControl.js","FreestreamControl.js","FlowDisplay.js","FlowBuilder.js","index.js"],"names":["loop","particles","FlowCanvas","props","canvasRef","useRef","dt","addParticle","xy","delta","push","Math","random","ddt","dxdt","uv","dydt","i","vortices","length","vort","dx","dy","r2","advance","ddt0","ddt1","canvas2","document","createElement","width","height","airfoil","code","toString","camber","parseInt","high","thick","substr","isNaN","thickFun","x","sqrt","camberFun","denom","round","xArray","Array","keys","map","reverse","points","splice","Airfoil","drawMain","ctx","getContext","clearRect","fillStyle","fillRect","iselect","strokeStyle","beginPath","moveTo","max","lineTo","min","stroke","arc","PI","fill","drawVortices","scale","drawAirfoil","ctx1","current","drawImage","useEffect","clearInterval","setInterval","filter","isFinite","x0","y0","u0","v0","noise","y","spacing","nj","ceil","rad0","j","rad","cos","sin","computeMain","ref","onClick","event","canvas","rect","getBoundingClientRect","scaleX","scaleY","clientX","left","clientY","top","side","onMouseMove","u","v","p","setmousestate","onMouseLeave","VortexControl","changex","selected","target","value","setvortices","changey","changeStrength","changeType","duplicate","remove","console","log","vortex","iVortex","onFocus","setselected","onTouchStart","type","onChange","readOnly","disabled","FreestreamControl","step","setuv","d","setdelta","setairfoil","FlowDisplay","mousestate","toFixed","FlowBuilder","str","canvasSize","useState","setSelected","useSearchParams","searchParams","setSearchParams","vorticesStr","get","split","parts","parseFloat","setVortices","rowSpan","src","vortexToStr","valign","colSpan","rootElement","getElementById","createRoot","render","path","element"],"mappings":"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","file":"static/js/main.d2ffabee.chunk.js","sourcesContent":["import { useEffect, useRef } from \"react\";\r\nimport Airfoil from \"./Airfoil\";\r\nimport \"./styles.css\";\r\n\r\nlet loop = null;\r\nlet particles = [[100, 100]];\r\n\r\nexport default function FlowCanvas(props) {\r\n  const canvasRef = useRef(null);\r\n  const dt = 1.5;\r\n\r\n  const addParticle = (xy, delta) => {\r\n    particles.push([\r\n      xy[0] + delta * (Math.random() - 0.5),\r\n      xy[1] + delta * (Math.random() - 0.5),\r\n    ]);\r\n  };\r\n\r\n  const ddt = (xy) => {\r\n    let dxdt = props.uv[0];\r\n    let dydt = props.uv[1];\r\n    for (let i = 0; i < props.vortices.length; ++i) {\r\n      let vort = props.vortices[i];\r\n      let dx = (xy[0] - vort[0]) / 100;\r\n      let dy = (xy[1] - vort[1]) / 100;\r\n      let r2 = dx * dx + dy * dy;\r\n      if (vort[3] == \"source\") {\r\n        dxdt += (vort[2] * dx) / 100 / r2;\r\n        dydt += (vort[2] * dy) / 100 / r2;\r\n      } else {\r\n        dxdt += (vort[2] * dy) / 100 / r2;\r\n        dydt -= (vort[2] * dx) / 100 / r2;\r\n      }\r\n    }\r\n    return [dxdt, dydt];\r\n  };\r\n\r\n  const advance = (xy) => {\r\n    let ddt0 = ddt(xy);\r\n    let ddt1 = ddt([xy[0] + (ddt0[0] * dt) / 2, xy[1] + (ddt0[1] * dt) / 2]);\r\n    xy[0] += ddt1[0] * dt;\r\n    xy[1] += ddt1[1] * dt;\r\n  };\r\n\r\n  const computeMain = () => {\r\n    for (let i = 0; i < particles.length; ++i) {\r\n      advance(particles[i]);\r\n    }\r\n    particles = particles.filter(\r\n      (xy) =>\r\n        Math.random() > 0.001 &&\r\n        isFinite(xy[0]) &&\r\n        isFinite(xy[1]) &&\r\n        xy[0] > -props.width * 0.2 &&\r\n        xy[0] < props.width * 1.2 &&\r\n        xy[1] > -props.height * 0.2 &&\r\n        xy[1] < props.height * 1.2\r\n    );\r\n    for (let i = 0; i < props.vortices.length; ++i) {\r\n      if (props.vortices[i][3] == \"source\" && props.vortices[i][2] < 0) {\r\n        const x0 = parseInt(props.vortices[i][0]);\r\n        const y0 = parseInt(props.vortices[i][1]);\r\n        particles = particles.filter((xy) => {\r\n          let dx = xy[0] - x0;\r\n          let dy = xy[1] - y0;\r\n          return dx * dx + dy * dy > -0.15 * dt * props.vortices[i][2];\r\n        });\r\n      }\r\n    }\r\n    let u0 = Math.max(0.01, props.uv[0]);\r\n    let v0 = Math.max(0.01, -props.uv[1]);\r\n    let noise = 3.0 / Math.sqrt(u0 * u0 + v0 * v0);\r\n    for (\r\n      let y = props.height - (props.spacing / u0) * props.delta;\r\n      y > -props.height * 0.2;\r\n      y -= props.spacing / u0\r\n    ) {\r\n      addParticle([0, y], noise);\r\n    }\r\n    for (\r\n      let x = (props.spacing / v0) * (1 - props.delta);\r\n      x < props.width * 1.2;\r\n      x += props.spacing / v0\r\n    ) {\r\n      addParticle([x, props.height], noise);\r\n    }\r\n    for (let i = 0; i < props.vortices.length; ++i) {\r\n      if (props.vortices[i][3] == \"source\" && props.vortices[i][2] > 0) {\r\n        const x0 = parseInt(props.vortices[i][0]);\r\n        const y0 = parseInt(props.vortices[i][1]);\r\n        let nj = Math.ceil((props.vortices[i][2] * 2.07) / props.spacing) * 3;\r\n        let rad0 = props.vortices[i][2] * 0.1 * dt;\r\n        for (let j = 0; j < nj; ++j) {\r\n          let rad = rad0 + (Math.random() - 0.5) * dt * 4;\r\n          let x = x0 + rad * Math.cos((j * 2 * Math.PI) / nj);\r\n          let y = y0 + rad * Math.sin((j * 2 * Math.PI) / nj);\r\n          addParticle([x, y], (0.5 * props.vortices[i][2]) / 1000);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  let canvas2 = document.createElement(\"canvas\");\r\n  canvas2.width = props.width;\r\n  canvas2.height = props.height;\r\n\r\n  const drawVortices = (ctx) => {\r\n    for (let i = 0; i < props.vortices.length; ++i) {\r\n      const xy = [\r\n        parseInt(props.vortices[i][0]),\r\n        parseInt(props.vortices[i][1]),\r\n      ];\r\n      if (props.iselect == i) {\r\n        ctx.strokeStyle = \"#880000\";\r\n\r\n        ctx.beginPath();\r\n        ctx.moveTo(xy[0], Math.max(1, xy[1] - 15));\r\n        ctx.lineTo(xy[0], Math.min(props.height, xy[1] + 15));\r\n        ctx.stroke();\r\n\r\n        ctx.beginPath();\r\n        ctx.moveTo(Math.max(1, xy[0] - 15), xy[1]);\r\n        ctx.lineTo(Math.min(props.width, xy[0] + 15), xy[1]);\r\n        ctx.stroke();\r\n\r\n        ctx.fillStyle = \"#880000\";\r\n        ctx.beginPath();\r\n        ctx.arc(xy[0], xy[1], 3, 0, 2 * Math.PI);\r\n      } else {\r\n        ctx.fillStyle = \"#008800\";\r\n        ctx.beginPath();\r\n        ctx.arc(xy[0], xy[1], 3, 0, 2 * Math.PI);\r\n      }\r\n      ctx.fill();\r\n    }\r\n  };\r\n\r\n  const airfoil = Airfoil(props.airfoil);\r\n\r\n  const drawAirfoil = (ctx) => {\r\n    if (airfoil == null) return;\r\n    const scale = props.width * 0.7;\r\n    ctx.strokeStyle = \"#888888\";\r\n    ctx.beginPath();\r\n    ctx.moveTo(\r\n      props.width * 0.15 + airfoil[0][0] * scale,\r\n      props.height / 2 - airfoil[0][1] * scale\r\n    );\r\n    for (let i = 1; i < airfoil.length; ++i) {\r\n      ctx.lineTo(\r\n        props.width * 0.15 + airfoil[i][0] * scale,\r\n        props.height / 2 - airfoil[i][1] * scale\r\n      );\r\n    }\r\n    ctx.stroke();\r\n  };\r\n\r\n  const drawMain = () => {\r\n    let ctx = canvas2.getContext(\"2d\");\r\n    ctx.clearRect(0, 0, props.width, props.height);\r\n    ctx.fillStyle = \"#000000\";\r\n    for (let i = 0; i < particles.length; ++i) {\r\n      let xy = particles[i];\r\n      ctx.fillRect(xy[0], xy[1], 1, 1);\r\n    }\r\n\r\n    drawVortices(ctx);\r\n    drawAirfoil(ctx);\r\n\r\n    const canvas = canvasRef.current;\r\n    const ctx1 = canvas.getContext(\"2d\");\r\n    ctx1.clearRect(0, 0, props.width, props.height);\r\n    ctx1.drawImage(canvas2, 0, 0);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (loop != null) clearInterval(loop);\r\n    loop = setInterval(() => {\r\n      computeMain();\r\n      drawMain();\r\n    }, 30);\r\n  }, [props]);\r\n\r\n  const mousemove = (event) => {\r\n    const canvas = canvasRef.current;\r\n    const rect = canvas.getBoundingClientRect();\r\n    const scaleX = canvas.width / rect.width; // relationship bitmap vs. element for x\r\n    const scaleY = canvas.height / rect.height; // relationship bitmap vs. element for y\r\n    const x = (event.clientX - rect.left) * scaleX;\r\n    const y = (event.clientY - rect.top) * scaleY;\r\n    const [u, v] = ddt([x, y]);\r\n    const p =\r\n      0.5 *\r\n      (props.uv[0] * props.uv[0] + props.uv[1] * props.uv[1] - u * u - v * v);\r\n    props.setmousestate([x, y, u, -v, p]);\r\n  };\r\n\r\n  const click = (event) => {\r\n    const canvas = canvasRef.current;\r\n    const rect = canvas.getBoundingClientRect();\r\n    const scaleX = canvas.width / rect.width; // relationship bitmap vs. element for x\r\n    const scaleY = canvas.height / rect.height; // relationship bitmap vs. element for y\r\n    const x0 = (event.clientX - rect.left) * scaleX;\r\n    const y0 = (event.clientY - rect.top) * scaleY;\r\n    const noise = 0.0;\r\n    if (Math.random() < 0.5) {\r\n      const side = 10;\r\n      for (let i = -side; i < side; i++) {\r\n        addParticle([x0 - side, y0 + i], noise);\r\n        addParticle([x0 + side, y0 + i], noise);\r\n        addParticle([x0 + i, y0 - side], noise);\r\n        addParticle([x0 + i, y0 + side], noise);\r\n      }\r\n    } else {\r\n      const side = 14;\r\n      for (let i = 0; i < side; i++) {\r\n        addParticle([x0 - i, y0 - side + i], noise);\r\n        addParticle([x0 + i, y0 - side + i], noise);\r\n        addParticle([x0 - i, y0 + side - i], noise);\r\n        addParticle([x0 + i, y0 + side - i], noise);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <canvas\r\n      ref={canvasRef}\r\n      onClick={click}\r\n      onMouseMove={mousemove}\r\n      onMouseLeave={() => {\r\n        props.setmousestate([]);\r\n      }}\r\n      width={props.width}\r\n      height={props.height}\r\n    />\r\n  );\r\n}\r\n","export default function Airfoil(code) {\r\n  if (code.toString().length == 4) {\r\n    const camber = parseInt(code.toString()[0]) / 100;\r\n    const high = parseInt(code.toString()[1]) / 10;\r\n    const thick = parseInt(code.toString().substr(2)) / 100;\r\n    if (isNaN(camber) || isNaN(high) || isNaN(thick)) return null;\r\n\r\n    const thickFun = (x) =>\r\n      5 *\r\n      thick *\r\n      (0.2969 * Math.sqrt(x) -\r\n        0.126 * x -\r\n        0.3516 * x * x +\r\n        0.2843 * x * x * x -\r\n        0.1015 * x * x * x * x);\r\n\r\n    const camberFun = (x) =>\r\n      x <= high\r\n        ? (camber / (high * high)) * (2 * high * x - x * x)\r\n        : (camber / ((1 - high) * (1 - high))) *\r\n          (1 - 2 * high + 2 * high * x - x * x);\r\n\r\n    const num = 6;\r\n    const denom = Math.round(num / thick);\r\n    const iArray = [...Array(2 * denom + 1).keys()];\r\n    let xArray = iArray.map(\r\n      (i) => ((i / denom) * (i / denom)) / (2 + i / denom)\r\n    );\r\n    xArray.reverse();\r\n    let points = xArray.map((x) => [x, camberFun(x) + thickFun(x)]);\r\n    xArray.reverse();\r\n    xArray.splice(0, 1);\r\n    points.push(...xArray.map((x) => [x, camberFun(x) - thickFun(x)]));\r\n    return points;\r\n  } else return null;\r\n}\r\n","import { useEffect, useRef } from \"react\";\r\nimport \"./styles.css\";\r\n\r\nexport default function VortexControl(props) {\r\n  const changex = (event) => {\r\n    let vortices = [...props.vortices];\r\n    vortices[props.selected][0] = event.target.value;\r\n    props.setvortices(vortices);\r\n  };\r\n\r\n  const changey = (event) => {\r\n    let vortices = [...props.vortices];\r\n    vortices[props.selected][1] = props.height - event.target.value;\r\n    props.setvortices(vortices);\r\n  };\r\n\r\n  const changeStrength = (event) => {\r\n    let vortices = [...props.vortices];\r\n    vortices[props.selected][2] = Math.max(\r\n      -100,\r\n      Math.min(100, event.target.value)\r\n    );\r\n    props.setvortices(vortices);\r\n  };\r\n\r\n  const changeType = (event) => {\r\n    let vortices = [...props.vortices];\r\n    vortices[props.selected][3] = event.target.value;\r\n    props.setvortices(vortices);\r\n  };\r\n\r\n  const duplicate = () => {\r\n    let vortices = [...props.vortices];\r\n    vortices.splice(props.selected, 0, [...vortices[props.selected]]);\r\n    props.setvortices(vortices);\r\n  };\r\n\r\n  const remove = () => {\r\n    let vortices = [...props.vortices];\r\n    vortices.splice(props.selected, 1);\r\n    console.log(props.selected, vortices.length);\r\n    props.setvortices(vortices);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <table>\r\n        <tbody>\r\n          <tr>\r\n            <th>x</th>\r\n            <th>y</th>\r\n            <th>strength</th>\r\n          </tr>\r\n\r\n          {props.vortices.map((vortex, iVortex) => (\r\n            <tr\r\n              key={iVortex}\r\n              onFocus={() => {\r\n                props.setselected(iVortex);\r\n              }}\r\n              onClick={() => {\r\n                props.setselected(iVortex);\r\n              }}\r\n              onTouchStart={() => {\r\n                props.setselected(iVortex);\r\n              }}\r\n            >\r\n              <td>\r\n                <input\r\n                  type=\"number\"\r\n                  value={vortex[0]}\r\n                  onChange={changex}\r\n                  min={0}\r\n                  max={props.width}\r\n                  readOnly={iVortex != props.selected}\r\n                />\r\n              </td>\r\n              <td>\r\n                <input\r\n                  type=\"number\"\r\n                  value={props.height - vortex[1]}\r\n                  onChange={changey}\r\n                  min={0}\r\n                  max={props.height}\r\n                  readOnly={iVortex != props.selected}\r\n                />\r\n              </td>\r\n              <td>\r\n                <input\r\n                  type=\"number\"\r\n                  value={vortex[2]}\r\n                  onChange={changeStrength}\r\n                  min={-100}\r\n                  max={100}\r\n                  readOnly={iVortex != props.selected}\r\n                />\r\n              </td>\r\n              <td>\r\n                <select value={vortex[3]} onChange={changeType}>\r\n                  <option value=\"vortex\">vortex</option>\r\n                  <option value=\"source\">source</option>\r\n                </select>\r\n              </td>\r\n              <td>\r\n                {\" \"}\r\n                {iVortex == props.selected ? (\r\n                  <button onClick={duplicate}>duplicate</button>\r\n                ) : (\r\n                  <span />\r\n                )}\r\n              </td>\r\n              <td>\r\n                {\" \"}\r\n                {iVortex == props.selected ? (\r\n                  <button\r\n                    disabled={props.vortices.length <= 1}\r\n                    onClick={remove}\r\n                  >\r\n                    remove\r\n                  </button>\r\n                ) : (\r\n                  <span />\r\n                )}\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n","import \"./styles.css\";\r\n\r\nexport default function FreestreamControl(props) {\r\n  return (\r\n    <div>\r\n      <p>\r\n        {\" \"}\r\n        u<sub>&infin;</sub>{\" \"}\r\n        <input\r\n          type=\"number\"\r\n          step={0.001}\r\n          value={props.uv[0]}\r\n          onChange={(event) => {\r\n            const u = Math.max(0, Math.min(1, event.target.value));\r\n            props.setuv([u, props.uv[1]]);\r\n          }}\r\n          min={0}\r\n          max={1}\r\n        />\r\n        {\"   \"}v<sub>&infin;</sub>{\" \"}\r\n        <input\r\n          type=\"number\"\r\n          step={0.001}\r\n          value={-props.uv[1]}\r\n          onChange={(event) => {\r\n            const v = Math.max(0, Math.min(1, event.target.value));\r\n            props.setuv([props.uv[0], -v]);\r\n          }}\r\n          min={0}\r\n          max={1}\r\n        />{\" \"}\r\n        {\"   \"}&delta;{\" \"}\r\n        <input\r\n          type=\"number\"\r\n          step={0.01}\r\n          value={props.delta}\r\n          onChange={(event) => {\r\n            const d = Math.max(0, Math.min(1, event.target.value));\r\n            props.setdelta(d);\r\n          }}\r\n          min={0}\r\n          max={1}\r\n        />\r\n      </p>\r\n      <p>\r\n        {\" naca \"}\r\n        <input\r\n          type=\"text\"\r\n          value={props.airfoil}\r\n          onChange={(event) => {\r\n            props.setairfoil(event.target.value);\r\n          }}\r\n          min={0}\r\n          max={1}\r\n        />\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n","import \"./styles.css\";\r\n\r\nexport default function FlowDisplay(props) {\r\n  if (props.mousestate.length == 0) return <div></div>;\r\n  return (\r\n    <div>\r\n      <p>x={props.mousestate[0].toFixed(0)}</p>\r\n      <p>y={props.mousestate[1].toFixed(0)}</p>\r\n      <p>u={props.mousestate[2].toFixed(2)}</p>\r\n      <p>v={props.mousestate[3].toFixed(2)}</p>\r\n      <p>p={props.mousestate[4].toFixed(2)}</p>\r\n    </div>\r\n  );\r\n}\r\n","import { useState } from \"react\";\nimport { useLocation, useSearchParams } from \"react-router-dom\";\nimport FlowCanvas from \"./FlowCanvas\";\nimport VortexControl from \"./VortexControl\";\nimport FreestreamControl from \"./FreestreamControl\";\nimport FlowDisplay from \"./FlowDisplay\";\nimport \"./styles.css\";\n\nexport default function FlowBuilder() {\n  const canvasSize = [1280, 720];\n  const [selected, setSelected] = useState(0);\n  const [uv, setuv] = useState([1.0, 0.0]);\n  const [delta, setdelta] = useState(0.0);\n  const [airfoil, setairfoil] = useState(\"\");\n  const [mousestate, setmousestate] = useState([]);\n  const [searchParams, setSearchParams] = useSearchParams();\n\n  const parseVorticesStr = (str) => {\n    if (str == null)\n      return [[canvasSize[0] / 2, canvasSize[1] / 2, 100, \"vortex\"]];\n    else\n      return str.split(\"~\").map((vortex) => {\n        const parts = vortex.split(\"_\");\n        return [\n          parseFloat(parts[0]),\n          parseFloat(canvasSize[1] - parts[1]),\n          parseFloat(parts[2]),\n          parts[3],\n        ];\n      });\n  };\n\n  let vorticesStr = searchParams.get(\"v\");\n  const [vortices, setVortices] = useState(parseVorticesStr(vorticesStr));\n  const setVorticesAndUrl = (vortices) => {\n    setVortices(vortices);\n    const vortexToStr = (v) =>\n      v[0].toString() +\n      \"_\" +\n      (canvasSize[1] - v[1]).toString() +\n      \"_\" +\n      v[2].toString() +\n      \"_\" +\n      v[3];\n    let str = vortexToStr(vortices[0]);\n    for (let i = 1; i < vortices.length; ++i) {\n      str += \"~\";\n      str += vortexToStr(vortices[i]);\n    }\n    setSearchParams({ v: str });\n  };\n\n  return (\n    <table>\n      <tbody>\n        <tr>\n          <td rowSpan={2}>\n            <img src=\"qi.jpg\" />\n          </td>\n          <td>\n            <VortexControl\n              vortices={vortices}\n              selected={selected}\n              setvortices={setVorticesAndUrl}\n              setselected={setSelected}\n              width={canvasSize[0]}\n              height={canvasSize[1]}\n            />\n          </td>\n          <td rowSpan={2} width=\"100px\" valign=\"bottom\">\n            <FlowDisplay mousestate={mousestate} />\n          </td>\n          <td rowSpan={2}>\n            <img src=\"qi.jpg\" />\n          </td>\n        </tr>\n        <tr>\n          <td>\n            <FreestreamControl\n              uv={uv}\n              setuv={setuv}\n              delta={delta}\n              setdelta={setdelta}\n              airfoil={airfoil}\n              setairfoil={setairfoil}\n            />\n          </td>\n        </tr>\n        <tr>\n          <td colSpan={4}>\n            <FlowCanvas\n              width={canvasSize[0]}\n              height={canvasSize[1]}\n              uv={uv}\n              spacing={20}\n              u0={[1.0, 0.0]}\n              vortices={vortices}\n              iselect={selected}\n              delta={delta}\n              airfoil={airfoil}\n              setmousestate={setmousestate}\n            />\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  );\n}\n","import { StrictMode } from \"react\";\nimport { createRoot } from \"react-dom/client\";\nimport { BrowserRouter, Router, Routes, Route } from \"react-router-dom\";\n\nimport FlowBuilder from \"./FlowBuilder\";\n\nconst rootElement = document.getElementById(\"root\");\nconst root = createRoot(rootElement);\n\nroot.render(\n  <StrictMode>\n    <BrowserRouter>\n      <Routes>\n        <Route path=\"/\" element={<FlowBuilder />} />\n      </Routes>\n    </BrowserRouter>\n  </StrictMode>\n);\n"],"sourceRoot":""}